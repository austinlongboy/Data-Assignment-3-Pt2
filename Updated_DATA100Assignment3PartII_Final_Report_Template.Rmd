---
title: "The Correlation Between Global Happiness, Ice Extent and Covid Cases"
subtitle: "Exploring Disparate Data: Part 3 - Final Report"
author: "data100 is my personal hell"
date: "Due November 26th, 2025"
output: 
        bookdown::pdf_document2: 
          toc: FALSE
---

List your group members, including their student numbers, here:

-   Austin Liu 169135314
-   Franco Mejia Batres 169112259
-   

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  message = FALSE
)
```
Abstract

This paper intends to explore the significance of a relationship between world happiness, polar ice extents and cases of COVID-19 through three compiled variables from three publicly accessible datasets. The three compiled datasets are from the World Happiness Report (happiness.parquet), ice extent by hemispherical determined compiled data over the year, compiled and averaged, (ice_extent_yearly.parquet) and COVID-19 globally totals for 2020 (covid_2020.parquet). These three variables were subsequently cleaned, merged and assessed through relative descriptive and correlational analyses to statistically assess any measure of relationship between the variables. Ultimately, significant findings yielded findings relatively weak in strength (.3-.4) to moderate (.5) holdings in some regions - although not everywhere. Thus the less happiness holds reported relative to life the more polar ice and COVID-19 cases suggesting that globally, life, climate and health have increasingly happy factors as well. Yet the fact that these findings come from a merged data point of view in a compiled effort from COVID-19 compiled findings from 2020 per country suggests this is not overly meaningful except for the fact that these environmental/epidemiological/social stressors exist, en masse, across the globe - all at once.

Introduction

21st century global stressors have plagued life in the 21st century and subsequently, impact life in the 21st century - global pandemics have risen with COVID-19 and climate change has determined a reduced polar ice extent and subsequently reduced ice extents per year (per annum) due to increased temperature determined changes over time for millions of people. Thus, social and economic life has changed across nations for billions of people in transition and simultaneously, decimal derived compiled data on ice extents have emerged over time per hemisphere based on annualized averages (increase or decrease based on temperature). Yet the third facet of this worldwide simultaneous experience is connected to a happiness report as compiled data has emerged over time linking various nations to a world's happiness score.

Thus establishing a relationship based on health-based stressors, climate-based stressors and social stressors as assessed over time internationally adds significance to the intersectional nature of how these three variables are more the same than different. This is an exploratory endeavor to take three variables from three compiled datasets which have been derived from three publicly available aggregate datasets relative to this idea. The first variable is the average cases of COVID-19 per nation based on a derived one year (2020) total. The second variable is the world's happiness score based on a life ladder indicator which compiles various assessed responses for happiness means per nation (or continental average for this exploratory study). The third variable is ice extent year or annualized averages based on hemispherical data collection.

Thus these three variables will be assessed through data cleaning, merging, visualization and correlational testing all completed within RStudio to determine any significance relative to one another. Since these are compiled efforts, causation cannot be determined beyond causal association where international borders rarely cross relative to health, climate and happiness holds as data comes from various sources.

Ultimately, limitations relative to findings will be assessed based on significances found such as an imperfect dataset temporally derived assessed through a continental basis once merged for relative findings to determine whether these findings are reasonable and valid within a reasonable range relative to research conclusions.

# Data Description

This dataset contains the variables for the World Happiness Report's developed model of national life-evaluation ("ladder") scores. Thus this dataset contains the developed score for each nation for predicted happiness, measures of statistical error (standard error and upper and lower whisker of the confidence interval), the main predictors that help explain differences in happiness at the country level (logged GDP per capita - social circumstances - social support, healthy life expectancy - health outcomes - freedom to make life choices - personal agency - generosity - prosocial behavior - and perceived corruption - institutional trust). For these four predictors, it also contains the extent to which these variables are used to help create a generalized predicted happiness score for each nation in the "Explained by" columns. Finally, it contains a baseline value for "Dystopia" (the model's reference minimum for predicted happiness) and a "Dystopia + residual" which shows how much is left from the predicted happiness score by accounting for all these explanations. In this way, the predicted happiness score for each nation can be disaggregated into component pieces that drive it.

To tidy the happiness dataset, I created a dataset happiness_clean where I changed the variable names for clarity and consistency with the rest of the variables. I changed country_name to country to create consistency with the other created datasets. I also changed ladder_score to just score to make it consistent with brevity but also the meaning that this is the score of happiness/life ladder for this specific dataset. Additionally, no rows were added or taken away or any other variables, just made it more clear and consistent with the rest of the variables throughout. 

## World Happiness Report (happiness.parquet)

```{r load_data1}
happiness_clean <- happiness |>
  rename(
    country = country_name,
    score   = ladder_score
  )

happiness_clean
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

# Note that the code in this document will not be shown
# when you click "knit", so the placement of this code
# chunk is purely for your benefit: You can see what happened
# with your data, which makes it easier to describe below!
```

This dataset (from the National Hurricane Center) is a panel of time-series data observed by month over a period of multiple years successively. Each row represents a different time-series (station, region, variable, etc.) and each column represents a different calendar month over the years assessed (1978 through 2025). As the columns only show the months in the header relative to the year, and each column holds the monthly value for that year, this is essentially wide time-series data. At the end of each row, two summary statistics are provided - the 1981-2010 mean and the 1981-2010 median - which represent long-term climatological averages for the monthly data over the 30 year reference period for that particular row. The data seems to be continuous numbers (temperature, precipitation or similar monthly related variables) with NAs for non-essential months for earlier years. Overall this is a wide time-series panel of observed monthly data for almost 50 years with summary statistics of considerations for long-term averages.
In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>.

To tidy the ice dataset, I downloaded the Northern daily sea-ice extent files and the Southern daily sea-ice extent files and added in a variable for hemisphere to distinguish. I then merged the two together into one ice_clean dataset and standardized their data types by making Year, Month, and Day columns all integers and Extent column Numeric. I also made sure the hemisphere variable was all lower case. Finally, I subset the information for just the latest information provided - which in this case was just the last available ice_extent for each hemisphere - which created a tidy ice dataset. 


## Ice extent: ice_extent_yearly.parquet

```{r load_data2}
library(dplyr)
library(readr)
library(stringr)

url_north <- "https://noaadata.apps.nsidc.org/NOAA/G02135/north/daily/data/N_seaice_extent_daily_v4.0.csv"
url_south <- "https://noaadata.apps.nsidc.org/NOAA/G02135/south/daily/data/S_seaice_extent_daily_v4.0.csv"

ice_north <- read_csv(url_north, show_col_types = FALSE) |>
  mutate(hemisphere = "north")

ice_south <- read_csv(url_south, show_col_types = FALSE) |>
  mutate(hemisphere = "south")

ice_clean <- bind_rows(ice_north, ice_south) |>
  mutate(
    Year  = as.integer(Year),
    Month = as.integer(Month),
    Day   = as.integer(Day),
    Extent = as.numeric(Extent),
    hemisphere = str_to_lower(hemisphere)
  ) |>
  group_by(hemisphere) |>
  filter(
    Year  == max(Year,  na.rm = TRUE)
  ) |>
  filter(
    Month == max(Month, na.rm = TRUE)
  ) |>
  filter(
    Day   == max(Day,   na.rm = TRUE)
  ) |>
  ungroup()

ice_clean
# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1

# Reminder: do NOT print your data to the screen unless it's
# completely necessary
```

The dataset is an extensive, daily, country-level, time-series of COVID-19 case, testing and vaccination and socio-demographic variables. Therefore, each entry relates to a specific country over a specific day relative to an ISO code and continent; geographical location and temporal extent. Within the dataset, daily, temporal epidemiological variables of interest to this project include totals confirmed cases, new confirmed cases, totals deaths and new deaths, smoothed deaths and cases, deaths per million and cases per million and smoothed deaths and cases per million. The health systems variables of interest are ICU patients, hospital patients and weekly admissions calculated relative to a reproduced rate. The testing totals variables include total tests administered, new tests smoothed total tests, positivity rate and tests per case. The vaccination rollouts variables include total vaccinations, numbers vaccinated, numbers fully vaccinated, number of booster doses, new vaccinations, vaccinations per one hundred or one million. A stringency index is included to relate how stringent public policy has been relative to a government-based approach to COVID-19 over time. In addition, countries are associated with various socio-demographic variables - population size and density, age structure (0-14; 65+), GDP per capita, poverty measures, prevalence measures relative to health systems response - beds per 1,000 residents at 4 different time intervals - expected years life at birth and human development index - sexed age structure extrapolates excess mortality measures. Thus, this dataset links dynamic, time-restricted measures of the pandemic with more stable measures (unlikely to change from day to day - and within the day - and daily measures not likely to change) as well as stable demographic measures per country for an all-encompassing, extensive study of COVID-19 trends.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

To tidy the covid_19 dataset, I changed some variable names for clarity and consistency naming location as country and date as year. I also needed to remove all rows related to continents or the eu to just have countries in this dataset. I then grouped values by country and selected the most recent record (most recent date) of 2020 for each country which means that each one would have a singular occurrence in my dataset. This means that all countries counted for covid_19 had their most recent numbers as of 2020 in a dataset called covid_19.


## Covid 2020 Cases: covid_2020.parquet

```{r load_data3}
library(dplyr)
library(tidyr)
library(stringr)
library(arrow)

covid_2020 <- read.csv("owid-covid-data.csv")
covid_2020
covid_19 <-covid_2020 |>
  rename(
    country = location,
    year    = date
  ) |>
  filter(
    !country %in% c(
      "Africa", "Asia", "Europe", "North America", "South America",
      "Oceania", "European Union")) |>
  group_by(country) |>
  slice_max(order_by = year, n = 1, with_ties = FALSE) |>
  ungroup()

covid_19

# Put in your code to load in the data set, along with any
# necessary cleaning beyond what was done in Part 1
```

The data come from \<<place>\> and detail \<<more specific description of the data>\>.

In order to clean the data, we \<\<steps to clean the data, concise but precise enough that a reader could follow your steps without seeing your code\>\>

## Combining the Data

Explain how any combinations of data were performed. Explain what kind of join was needed, whether columns had to be modified (for example, matching "country" names.)

# Join the datasets
covid_happy <- covid_clean |>
  left_join(happiness_clean, by = "country")

# Plot
#The chart suggests that those countries with the highest cases cluster into a smaller range of much higher happiness scores, about 6-7. Yet for those countries with lower #cases, happiness scores are all over the place from very low happiness to very high. This means that there is a positive correlation that at least encourages one to understand #the possibility that higher case countries had better healthcare systems in place, economic support or social support to encourage testing/reporting and also encouraged higher levels of happiness during the pandemic.

#Therefore, while it's not a concrete linear response, the pictures imply that countries that were able to successfully manage high case numbers and report them also were able #to maintain such happiness scores.

ggplot(covid_happy, aes(x = total_cases, y = score)) +
  geom_point(alpha = 0.6) +
  labs(
    title = "Happiness Score vs Total COVID Cases",
    x = "Total COVID Cases",
    y = "Happiness Score"
  ) +
  theme_minimal()

According to the chart, as of the present date, the sea-ice extent of the southern hemisphere far outweighs the sea-ice extent of the northern hemisphere. However, the northern hemisphere does still have a decent amount of ice, as projected, but not to a percentage that would render it comparable to the southern hemisphere amount. Thus, over time, there exists an inequitable, hemispheric distribution of sea-ice extent because where it is located, Antarctica, is so much larger than where it is (in the Arctic). It makes the bars so stark that they don't need much additional explanation.

ggplot(ice_clean, aes(x = hemisphere, y = Extent, fill = hemisphere)) +
  geom_col() +
  labs(
    title = "Sea Ice Extent by Hemisphere (Most Recent Observation)",
    x = "Hemisphere",
    y = "Ice Extent"
  ) +
  theme_minimal() +
  theme(legend.position = "none")

The histogram indicates that the bulk of countries fall into the 5-7 range with happiness levels fairly good to great across the world. A good amount of countries fall far left of this range creating a left tail, however, a small amount fall to the right of the 8. The data is somewhat right skewed in that more countries exceed the mean than fail to meet it. This implies that people across the globe are not overly happy, but they're also not overtly unhappy.
ggplot(happiness_clean, aes(x = score)) +
  geom_histogram(binwidth = 0.5, fill = "steelblue", color = "white", alpha = 0.8) +
  labs(
    title = "Distribution of Happiness Scores Across Countries",
    x = "Happiness Score",
    y = "Number of Countries"
  ) +
  theme_minimal()

# Exploratory Data Analysis

To achieve our goals, we explored the data by...

We explored many aspects of the data, but will demonstrate three. These are \<\<insight 1\>\>, \<\<insight 2\>\>, and \<<insight3>\>

The first aspect that we found interesting is shown in Figure \@ref(fig:insight1). The insight should be specific to the data shown, not a general statement beyond the data (leave that for the conclusion).

```{r insight1, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items.", fig.pos="H"}
# This is an example of how you can control figures and captions in
# an R chunk. Note that you can reference figures using:
# \@ref(fig:insight1), where "insight1" is the label of this code
# chunk (the first bit of text after the "r" in "```{r label, options...}")
```

This insight is supported by the summary statistics in Table \@ref(tab:summary_stats)

```{r summary_stats, tab.cap= " "}
# Calculate the relevant summary statistics here.
# Note that the "kable" function in the "knitr" package
# is convenient for making nice tables. Other packages can
# do much fancier things with tables, but keep in mind that
# the insights should be the star, not the formatting.


library(dplyr)

covid_happy_summary <- covid_happy |>
  summarize(
    count = n(),
    mean_score = mean(score, na.rm = TRUE),
    median_score = median(score, na.rm = TRUE),
    min_score = min(score, na.rm = TRUE),
    max_score = max(score, na.rm = TRUE),
    sd_score = sd(score, na.rm = TRUE),
    mean_cases = mean(total_cases, na.rm = TRUE),
    median_cases = median(total_cases, na.rm = TRUE),
    min_cases = min(total_cases, na.rm = TRUE),
    max_cases = max(total_cases, na.rm = TRUE),
    sd_cases = sd(total_cases, na.rm = TRUE)
  )

covid_happy_summary

The summary statistics reveal that, across all countries, the average happiness score is moderate, with most countries clustering near the median, while a few outliers report particularly high or low scores. Total COVID-19 cases show much greater variation, with some countries experiencing very high case counts and others relatively few. The standard deviation in COVID cases is substantially larger than that for happiness scores, highlighting wide disparities in pandemic impact. Overall, while happiness scores are fairly consistent globally, COVID-19 cases vary dramatically, suggesting that pandemic exposure alone may not fully explain differences in reported well-being.

```

The next insight that we found is shown in Figure \@ref(fig:insight2).

```{r insight2, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items.", fig.pos="H"}
# This figure will have a height of 4 and a width of 6.
# Feel free to change this, and to apply different sizes
# to the other figures you create.
```

Finally, Figure \@ref(fig:insight3) shows ...

```{r insight3, fig.height=4, fig.width=6, fig.cap="This is a figure caption that you will need to change in order to get good marks in the visualization rubric items."}
```

# Conclusion and Future Work - Franco

Overall, we found that countriesâ€™ happiness scores show some association with both COVID-19 cases and environmental factors like sea ice extent. The scatterplot of happiness versus total COVID cases suggested that countries with higher case counts tended to have lower reported happiness, though the relationship is not strictly linear. The comparison of ice extent across hemispheres highlighted the substantial difference between the northern and southern hemispheres, which allowed us to assign environmental exposure to countries and compare it against their happiness scores.

A second observation from the data is that, when combining happiness with ice extent by hemisphere, there appears to be only a weak relationship between environmental factors measured here and reported happiness, suggesting that other socio-economic and cultural factors may dominate the perception of well-being in different countries. The differences between hemispheres may also reflect regional clustering rather than causal effects of ice extent.

The next steps in this analysis are to expand the environmental indicators to include additional climate or pollution measures, and to incorporate temporal trends to see how happiness, COVID-19 impact, and environmental factors co-vary over time. Additional regression analyses or multivariate models could help quantify the relative contribution of health and environmental factors to happiness more precisely.

The limitations of this analysis are as follows. First, the ice extent data are aggregated at the hemisphere level, which limits the granularity and may obscure local environmental conditions experienced by each country. Second, COVID-19 case counts vary in reliability and reporting across countries, which could bias the apparent relationship with happiness. Third, the happiness dataset is cross-sectional and reflects only the most recent observation per country, which prevents analysis of trends or lagged effects. These limitations mean that any observed relationships should be interpreted as descriptive rather than causal, and they underscore the need for more detailed, temporally aligned datasets to draw stronger conclusions.
# References

I am not strict about MLA or APA style or anything like that. For this report, I would much rather have your citations be easy to match to your insights.

The easiest way is to use Rmd's [footnote](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#inline-formatting) syntax. This will put a number beside the word where the footnote appears, and the full text of the footnote at the bottom of the page (pdf) or end of the document (html). The syntax is:[^1], where I suggest that you put in something like this [^2] to make references for this assignment.

[^1]: See the source view to see this footnote

[^2]: The relevance to the insight is ... . From \<<name of source and name of article>\>, published on \<<date>\>, url: \<<link to page>\>

Alternatively, you could make a list of citations with their main arguments and why they're relevent to your insights, methods, etc.

The link above also references "bibtex" files. These are also extremely convenient, but have a steep learning curve and they make it difficult to tie them to an insight. If you use bibtext, then make sure that you provide a sentence to describe the source and it's relevance when you cite it - don't just add citations to the end of a sentence (this is common practice in academia, but I want to know that your citations are directly relevant for this assignmnet).

https://arctic.noaa.gov/report-card/report-card-2023/sea-ice-2023/
https://covid.ourworldindata.org/data/owid-covid-data.csv
https://worldhappiness.report/ed/2023/#appendices-and-data











